<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Four Foot Spider Robot - Yiqing Zhi</title>
    <link rel="icon" type="image/x-icon" href="Images/favicon.ico">
    <!-- Three.js 3D Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #000000;
            position: relative;
            overflow-x: hidden;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Enhanced Galaxy Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(ellipse at 15% 25%, rgba(75, 0, 130, 0.5) 0%, transparent 50%),
                radial-gradient(ellipse at 85% 75%, rgba(138, 43, 226, 0.4) 0%, transparent 45%),
                radial-gradient(ellipse at 50% 50%, rgba(25, 25, 112, 0.6) 0%, transparent 70%),
                radial-gradient(ellipse at 70% 30%, rgba(72, 61, 139, 0.3) 0%, transparent 60%),
                linear-gradient(180deg, #000000 0%, #0d0221 30%, #1a0b3d 60%, #2d1b69 100%);
            animation: galaxyRotate 60s linear infinite;
        }

        @keyframes galaxyRotate {
            0% { background-position: 0% 0%, 100% 100%, 50% 50%, 70% 30%, 0% 0%; }
            100% { background-position: 100% 100%, 0% 0%, 60% 40%, 30% 70%, 0% 0%; }
        }

        /* Progress Bar - Spider Crawler */
        .progress-container {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, 
                rgba(102, 126, 234, 0.3) 0%,
                rgba(118, 75, 162, 0.3) 50%,
                rgba(240, 147, 251, 0.3) 100%);
            z-index: 1000;
            pointer-events: none;
            overflow: visible;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #f093fb 50%, 
                #4facfe 75%,
                #00f2fe 100%);
            background-size: 200% 100%;
            width: 0%;
            transition: width 0.1s ease-out;
            box-shadow: 
                0 0 20px rgba(102, 126, 234, 0.8),
                0 0 40px rgba(118, 75, 162, 0.6);
            animation: progressGlow 3s ease-in-out infinite;
            position: relative;
        }

        .progress-spider {
            position: absolute;
            bottom: -8px;
            right: -15px;
            font-size: 1.5rem;
            filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.9))
                    drop-shadow(0 0 20px rgba(240, 147, 251, 0.7));
            animation: spiderCrawl 0.5s ease-in-out infinite;
            transform: scaleX(1) rotate(90deg);
            transform-origin: center;
        }

        /* Spider silk thread trailing behind */
        .progress-spider::before {
            content: '';
            position: absolute;
            top: -30px;
            left: 50%;
            width: 2px;
            height: 30px;
            background: linear-gradient(to bottom,
                rgba(255, 255, 255, 0.6) 0%,
                rgba(255, 255, 255, 0.4) 50%,
                rgba(255, 255, 255, 0.2) 100%
            );
            transform: translateX(-50%);
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
            animation: silkWave 2s ease-in-out infinite;
        }

        /* Additional web anchor point */
        .progress-spider::after {
            content: '‚Ä¢';
            position: absolute;
            top: -32px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.5rem;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            animation: anchorGlow 2s ease-in-out infinite;
        }

        @keyframes spiderCrawl {
            0%, 100% {
                transform: scaleX(1) rotate(90deg) translateX(0);
            }
            25% {
                transform: scaleX(1) rotate(90deg) translateX(-1px);
            }
            75% {
                transform: scaleX(1) rotate(90deg) translateX(-1px);
            }
        }

        @keyframes silkWave {
            0%, 100% {
                opacity: 0.6;
                transform: translateX(-50%) scaleY(1);
            }
            50% {
                opacity: 0.8;
                transform: translateX(-50%) scaleY(1.1);
            }
        }

        @keyframes anchorGlow {
            0%, 100% {
                opacity: 0.7;
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            }
            50% {
                opacity: 1;
                text-shadow: 0 0 15px rgba(255, 255, 255, 1);
            }
        }

        @keyframes progressGlow {
            0%, 100% {
                background-position: 0% 50%;
                box-shadow: 
                    0 0 20px rgba(102, 126, 234, 0.8),
                    0 0 40px rgba(118, 75, 162, 0.6);
            }
            50% {
                background-position: 100% 50%;
                box-shadow: 
                    0 0 30px rgba(102, 126, 234, 1),
                    0 0 60px rgba(118, 75, 162, 0.8);
            }
        }

        /* SPIDER WEB TRAIL */
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 100%;
            background: repeating-linear-gradient(
                -45deg,
                transparent 0px,
                rgba(255, 255, 255, 0.1) 2px,
                transparent 4px,
                transparent 8px
            ),
            repeating-linear-gradient(
                45deg,
                transparent 0px,
                rgba(255, 255, 255, 0.1) 2px,
                transparent 4px,
                transparent 8px
            ),
            linear-gradient(to left,
                rgba(102, 126, 234, 0) 0%,
                rgba(102, 126, 234, 0.2) 20%,
                rgba(118, 75, 162, 0.3) 40%,
                rgba(240, 147, 251, 0.2) 60%,
                rgba(79, 172, 254, 0.15) 80%,
                rgba(0, 242, 254, 0.1) 100%
            );
            filter: blur(3px);
            opacity: 0.6;
            animation: webPulse 2s ease-in-out infinite;
        }

        /* SPIDER WEB PATTERN */
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 30px;
            width: 180px;
            height: 100%;
            transform: translateY(-50%);
            opacity: 0.4;
            background: 
                /* Radial web pattern */
                repeating-radial-gradient(
                    circle at 100% 50%,
                    transparent 0px,
                    rgba(255, 255, 255, 0.3) 1px,
                    transparent 2px,
                    transparent 15px
                ),
                /* Spiral web lines */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(255, 255, 255, 0.2) 1px,
                    transparent 2px,
                    transparent 20px
                );
            animation: webShimmer 3s ease-in-out infinite;
            filter: blur(0.5px);
        }

        @keyframes webPulse {
            0%, 100% {
                opacity: 0.6;
                filter: blur(3px);
            }
            50% {
                opacity: 0.8;
                filter: blur(2px);
            }
        }

        @keyframes webShimmer {
            0%, 100% {
                opacity: 0.4;
            }
            50% {
                opacity: 0.6;
            }
        }

        /* Navigation - Matching Main Portfolio */
        nav {
            background: linear-gradient(180deg, 
                rgba(10, 14, 35, 0.98) 0%,
                rgba(15, 20, 45, 0.95) 100%);
            backdrop-filter: blur(15px);
            padding: 1rem 2rem;
            box-shadow: 
                0 4px 30px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(102, 126, 234, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 2px solid rgba(102, 126, 234, 0.4);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            height: 40px;
            width: auto;
            border-radius: 10px;
            transition: all 0.3s ease;
            filter: drop-shadow(0 4px 15px rgba(102, 126, 234, 0.5));
            cursor: pointer;
        }

        .nav-logo:hover {
            transform: scale(1.1);
            filter: drop-shadow(0 6px 25px rgba(102, 126, 234, 0.8));
        }

        .back-btn {
            padding: 0.7rem 1.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            border: 2px solid rgba(102, 126, 234, 0.5);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            position: relative;
            overflow: hidden;
        }

        .back-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.5s ease, height 0.5s ease;
        }

        .back-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
            color: white;
        }

        .back-btn span {
            position: relative;
            z-index: 1;
        }

        /* Hero Section with Parallax */
        .project-hero {
            position: relative;
            height: 65vh;
            min-height: 550px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 4rem;
            border-radius: 0 0 20px 20px;
        }

        /* Soft background image layer */
        .project-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('Images/spider_robot_hero.jpg') center center / cover no-repeat;
            filter: blur(8px) brightness(0.4) contrast(0.8);
            transform: scale(1.1);
            z-index: 0;
        }

        /* Gradient overlay */
        .project-hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg,
                rgba(10, 14, 35, 0.7) 0%,
                rgba(13, 2, 33, 0.6) 25%,
                rgba(26, 11, 61, 0.5) 50%,
                rgba(45, 27, 105, 0.6) 75%,
                rgba(10, 14, 35, 0.7) 100%
            );
            z-index: 1;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            max-width: 900px;
            padding: 2rem;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 
                0 0 30px rgba(0, 0, 0, 0.9),
                0 4px 10px rgba(0, 0, 0, 0.8),
                0 0 60px rgba(102, 126, 234, 0.6);
            letter-spacing: 2px;
            font-weight: 700;
        }

        .hero-content .subtitle {
            font-size: 1.4rem;
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.9);
            line-height: 1.6;
        }

        /* Corner Decorations */
        .carousel-corner {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 3px solid #667eea;
            z-index: 10;
            pointer-events: none;
        }

        .corner-tl {
            top: 15px;
            left: 15px;
            border-right: none;
            border-bottom: none;
            box-shadow: -2px -2px 20px rgba(102, 126, 234, 0.6);
        }

        .corner-tr {
            top: 15px;
            right: 15px;
            border-left: none;
            border-bottom: none;
            box-shadow: 2px -2px 20px rgba(102, 126, 234, 0.6);
        }

        .corner-bl {
            bottom: 15px;
            left: 15px;
            border-right: none;
            border-top: none;
            box-shadow: -2px 2px 20px rgba(102, 126, 234, 0.6);
        }

        .corner-br {
            bottom: 15px;
            right: 15px;
            border-left: none;
            border-top: none;
            box-shadow: 2px 2px 20px rgba(102, 126, 234, 0.6);
        }

        /* 3D Model Viewer Styles */
        #hero-3d-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
        }

        .model-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            background: rgba(10, 14, 35, 0.95);
            backdrop-filter: blur(15px);
            padding: 1rem 1.5rem;
            border-radius: 50px;
            border: 2px solid rgba(102, 126, 234, 0.5);
            display: flex;
            gap: 0.8rem;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
        }

        .model-control-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .model-control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .model-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 5;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            background: rgba(10, 14, 35, 0.9);
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid rgba(102, 126, 234, 0.5);
        }

        .model-loading.hidden {
            display: none;
        }

        /* Side Info Cards */
        .side-info-cards {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 3;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .side-info-cards.left {
            left: 30px;
        }

        .side-info-cards.right {
            right: 30px;
        }

        .info-card {
            background: rgba(10, 14, 35, 0.85);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(102, 126, 234, 0.4);
            border-radius: 15px;
            padding: 1.2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 200px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.4s ease;
            opacity: 0;
            animation: slideInCard 0.8s ease forwards;
        }

        @keyframes slideInCard {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .side-info-cards.right .info-card {
            animation: slideInCardRight 0.8s ease forwards;
        }

        @keyframes slideInCardRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .info-card:hover {
            transform: translateX(10px);
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 0 12px 40px rgba(102, 126, 234, 0.5);
        }

        .side-info-cards.right .info-card:hover {
            transform: translateX(-10px);
        }

        .info-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 0 10px rgba(102, 126, 234, 0.6));
            flex-shrink: 0;
        }

        .info-text h4 {
            color: #667eea;
            font-size: 0.95rem;
            margin: 0 0 0.3rem 0;
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .info-text p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.85rem;
            margin: 0;
            font-weight: 600;
        }

        /* Content Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 4rem;
        }

        .content-section {
            background: rgba(10, 14, 35, 0.95);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 15px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.3),
                0 0 60px rgba(102, 126, 234, 0.2);
            position: relative;
            overflow: hidden;
        }

        .content-section::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            background: linear-gradient(45deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #f093fb 50%, 
                #667eea 75%, 
                #764ba2 100%);
            background-size: 300% 300%;
            border-radius: 15px;
            z-index: -1;
            animation: borderGlow 6s linear infinite;
            opacity: 0.3;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .section-title {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 2rem;
            text-shadow: 0 0 20px rgba(102, 126, 234, 0.6);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-content {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .section-content p {
            margin-bottom: 1.5rem;
        }

        .section-content h3 {
            color: #f093fb;
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 15px rgba(240, 147, 251, 0.5);
        }

        .section-content ul {
            list-style: none;
            padding-left: 0;
            margin: 1.5rem 0;
        }

        .section-content ul li {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 1rem;
            color: rgba(255, 255, 255, 0.85);
            transition: all 0.3s ease;
        }

        .section-content ul li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: #667eea;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
        }

        .section-content ul li:hover {
            padding-left: 2.5rem;
            color: rgba(255, 255, 255, 1);
        }

        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        /* ========================================
        3D ROTATING CAROUSEL GALLERY
        ======================================== */

        .carousel-container {
            position: relative;
            width: 100%;
            height: 600px;
            margin: 3rem 0;
            perspective: 2000px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-track {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-slide {
            position: absolute;
            width: 500px;
            height: 400px;
            border-radius: 20px;
            overflow: hidden;
            border: 3px solid rgba(102, 126, 234, 0.5);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            background: rgba(10, 14, 35, 0.9);
        }

        /* Center slide - active */
        .carousel-slide.active {
            z-index: 10;
            transform: translateX(0) scale(1) rotateY(0deg);
            opacity: 1;
            filter: brightness(1) blur(0);
            border-color: rgba(102, 126, 234, 1);
            box-shadow: 
                0 30px 80px rgba(102, 126, 234, 0.6),
                0 0 60px rgba(102, 126, 234, 0.4);
        }

        /* Left slide - behind */
        .carousel-slide.left {
            z-index: 5;
            transform: translateX(-65%) scale(0.75) rotateY(25deg);
            opacity: 0.4;
            filter: brightness(0.6) blur(3px);
        }

        /* Right slide - behind */
        .carousel-slide.right {
            z-index: 5;
            transform: translateX(65%) scale(0.75) rotateY(-25deg);
            opacity: 0.4;
            filter: brightness(0.6) blur(3px);
        }

        /* Hidden slides */
        .carousel-slide.hidden {
            z-index: 1;
            transform: translateX(0) scale(0.5);
            opacity: 0;
            pointer-events: none;
        }

        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .carousel-slide.active img {
            object-fit: cover;
        }

        .carousel-slide:hover.active img {
            transform: scale(1.05);
        }

        /* Caption - only show on active slide */
        .carousel-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: linear-gradient(to top,
                rgba(10, 14, 35, 0.98) 0%,
                rgba(10, 14, 35, 0.95) 70%,
                transparent 100%);
            backdrop-filter: blur(10px);
            color: white;
            transform: translateY(100%);
            transition: transform 0.5s ease;
            z-index: 20;
        }

        .carousel-slide.active:hover .carousel-caption {
            transform: translateY(0);
        }

        .carousel-caption h4 {
            font-size: 1.3rem;
            color: #667eea;
            margin-bottom: 0.5rem;
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
        }

        .carousel-caption p {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            margin: 0;
        }

        .carousel-caption .short-desc {
            display: block;
        }

        .carousel-caption .long-desc {
            display: none;
        }

        .carousel-caption.expanded .short-desc {
            display: none;
        }

        .carousel-caption.expanded .long-desc {
            display: block;
        }

        .caption-expand-btn {
            display: inline-block;
            margin-top: 0.5rem;
            padding: 0.3rem 0.8rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .caption-expand-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.6);
        }

        .carousel-caption.expanded .caption-expand-btn {
            background: linear-gradient(135deg, #f093fb 0%, #667eea 100%);
        }

        /* Carousel Controls */
        .carousel-controls {
            position: absolute;
            bottom: -80px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 2rem;
            z-index: 15;
        }

        .carousel-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
        }

        .carousel-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.8);
        }

        .carousel-btn:active {
            transform: scale(0.95);
        }

        .carousel-dots {
            display: flex;
            gap: 0.8rem;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(102, 126, 234, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .carousel-dot.active {
            background: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.9);
            transform: scale(1.3);
        }

        .carousel-dot:hover {
            background: rgba(102, 126, 234, 0.6);
            transform: scale(1.2);
        }

        .carousel-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 25;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
        }

        /* Mobile Responsive Carousel */
        @media (max-width: 768px) {
            .carousel-container {
                height: 450px;
            }
            
            .carousel-slide {
                width: 320px;
                height: 280px;
            }
            
            .carousel-slide.left,
            .carousel-slide.right {
                transform: translateX(0) scale(0.6);
                opacity: 0.2;
                filter: brightness(0.4) blur(5px);
            }
            
            .carousel-slide.left {
                transform: translateX(-85%) scale(0.6);
            }
            
            .carousel-slide.right {
                transform: translateX(85%) scale(0.6);
            }
            
            .carousel-controls {
                bottom: -70px;
            }
            
            .carousel-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        /* Image Gallery */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
            background: rgba(10, 14, 35, 0.8);
            height: 400px;
        }

        .gallery-item:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 
                0 20px 50px rgba(102, 126, 234, 0.5),
                0 0 40px rgba(102, 126, 234, 0.3);
        }

        .gallery-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg,
                rgba(102, 126, 234, 0.2) 0%,
                transparent 50%,
                rgba(118, 75, 162, 0.2) 100%);
            z-index: 2;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .gallery-item:hover::before {
            opacity: 1;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: filter 0.6s ease;
            filter: brightness(0.9);
        }

        .gallery-item:hover img {
            filter: blur(8px) brightness(0.6);
        }

        .gallery-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: linear-gradient(to top, 
                rgba(10, 14, 35, 0.98) 0%,
                rgba(10, 14, 35, 0.95) 70%,
                transparent 100%);
            backdrop-filter: blur(10px);
            color: white;
            transform: translateY(100%);
            transition: transform 0.4s ease;
            z-index: 3;
            border-top: 2px solid rgba(102, 126, 234, 0.5);
        }

        .gallery-item:hover .gallery-caption {
            transform: translateY(0);
        }

        .gallery-caption h4 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #667eea;
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
        }

        .gallery-caption p {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.5;
            margin: 0;
        }

        .gallery-item.featured {
            grid-column: span 2;
            height: 400px;
        }

        .gallery-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 4;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.5);
            }
            50% { 
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.8);
            }
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(102, 126, 234, 0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 3rem;
            color: white;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s ease;
        }

        .lightbox-close:hover {
            color: #667eea;
            transform: rotate(90deg) scale(1.2);
        }

        /* Footer with Spider Web Theme Navigation */
        footer {
            background: rgba(10, 14, 35, 0.95);
            backdrop-filter: blur(15px);
            border-top: 3px solid rgba(102, 126, 234, 0.4);
            color: white;
            text-align: center;
            padding: 3rem 2rem 2rem;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }

        /* Animated Spider Web Background */
        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-radial-gradient(
                    circle at 50% 50%,
                    transparent 0px,
                    rgba(102, 126, 234, 0.1) 1px,
                    transparent 2px,
                    transparent 80px
                ),
                repeating-radial-gradient(
                    circle at 30% 20%,
                    transparent 0px,
                    rgba(118, 75, 162, 0.08) 1px,
                    transparent 2px,
                    transparent 60px
                ),
                repeating-radial-gradient(
                    circle at 70% 80%,
                    transparent 0px,
                    rgba(240, 147, 251, 0.08) 1px,
                    transparent 2px,
                    transparent 60px
                );
            animation: webShimmer 8s ease-in-out infinite;
            opacity: 0.4;
            pointer-events: none;
        }

        footer::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    transparent 0px,
                    rgba(255, 255, 255, 0.05) 1px,
                    transparent 2px,
                    transparent 100px
                ),
                repeating-linear-gradient(
                    -45deg,
                    transparent 0px,
                    rgba(255, 255, 255, 0.05) 1px,
                    transparent 2px,
                    transparent 100px
                );
            animation: webFloat 15s ease-in-out infinite;
            opacity: 0.3;
            pointer-events: none;
        }

        @keyframes webFloat {
            0%, 100% {
                opacity: 0.3;
                transform: translateY(0);
            }
            50% {
                opacity: 0.5;
                transform: translateY(-5px);
            }
        }

        .racing-track-nav {
            max-width: 1400px;
            margin: 0 auto 3rem;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 3rem;
            align-items: center;
            position: relative;
            padding: 2rem 0;
        }

        .track-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                rgba(102, 126, 234, 0.3) 0%,
                rgba(102, 126, 234, 0.8) 50%,
                rgba(102, 126, 234, 0.3) 100%
            );
            transform: translateY(-50%);
            z-index: 0;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .track-line::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: repeating-linear-gradient(
                90deg,
                rgba(255, 255, 255, 0.3) 0px,
                rgba(255, 255, 255, 0.3) 2px,
                transparent 2px,
                transparent 20px
            );
            transform: translateY(-50%);
            animation: silkGlimmer 3s ease-in-out infinite;
        }

        @keyframes silkGlimmer {
            0%, 100% {
                opacity: 0.5;
            }
            50% {
                opacity: 1;
            }
        }

        .track-checkpoint {
            background: linear-gradient(135deg,
                rgba(10, 14, 35, 0.95) 0%,
                rgba(20, 25, 50, 0.95) 100%
            );
            border: 3px solid rgba(102, 126, 234, 0.4);
            border-radius: 20px;
            padding: 1.5rem 2rem;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            transition: all 0.4s ease;
            position: relative;
            z-index: 2;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(102, 126, 234, 0.2);
        }

        .track-checkpoint::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-radial-gradient(
                    circle at 50% 50%,
                    transparent 0px,
                    rgba(102, 126, 234, 0.1) 1px,
                    transparent 2px,
                    transparent 20px
                ),
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 15px,
                    rgba(102, 126, 234, 0.05) 15px,
                    rgba(102, 126, 234, 0.05) 30px
                );
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .track-checkpoint:hover::before {
            opacity: 1;
        }

        .track-checkpoint:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(102, 126, 234, 0.9);
            box-shadow: 
                0 15px 45px rgba(102, 126, 234, 0.4),
                0 0 60px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(102, 126, 234, 0.4);
        }

        .checkpoint-left {
            justify-content: flex-start;
        }

        .checkpoint-right {
            justify-content: flex-end;
        }

        .checkpoint-flag {
            font-size: 2.5rem;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5));
            animation: spiderWiggle 2s ease-in-out infinite;
        }

        @keyframes spiderWiggle {
            0%, 100% { transform: rotate(-8deg); }
            50% { transform: rotate(8deg); }
        }

        .speed-arrow {
            font-size: 2.5rem;
            color: #667eea;
            text-shadow: 0 0 20px rgba(102, 126, 234, 0.8);
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .track-checkpoint:hover .speed-arrow {
            color: #f093fb;
            text-shadow: 0 0 30px rgba(240, 147, 251, 0.9);
        }

        .checkpoint-left:hover .speed-arrow {
            transform: translateX(-10px);
        }

        .checkpoint-right:hover .speed-arrow {
            transform: translateX(10px);
        }

        .checkpoint-content {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
            text-align: left;
        }

        .checkpoint-right .checkpoint-content {
            text-align: right;
        }

        .checkpoint-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
        }

        .checkpoint-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .pit-stop {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 60px;
            padding: 1.5rem 3rem;
            text-decoration: none;
            color: white;
            font-weight: 700;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.4s ease;
            box-shadow: 
                0 10px 40px rgba(102, 126, 234, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 3;
            white-space: nowrap;
        }

        .pit-stop::before {
            content: '';
            position: absolute;
            inset: -3px;
            background: 
                repeating-radial-gradient(
                    circle at 50% 50%,
                    #667eea 0%,
                    #764ba2 25%,
                    #f093fb 50%,
                    #4facfe 75%,
                    #667eea 100%
                );
            background-size: 300% 300%;
            border-radius: 60px;
            z-index: -1;
            animation: borderGlow 3s linear infinite;
            filter: blur(8px);
        }

        .pit-stop:hover {
            transform: translateY(-10px) scale(1.08);
            box-shadow: 
                0 20px 60px rgba(102, 126, 234, 0.8),
                0 0 80px rgba(240, 147, 251, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .pit-stop-icon {
            font-size: 2rem;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        .pit-stop-text {
            font-size: 1.1rem;
            letter-spacing: 2px;
        }

        .pit-stop-lights {
            display: flex;
            gap: 0.4rem;
            margin-top: 0.3rem;
        }

        .light {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            animation: webDroplet 2s ease-in-out infinite;
        }

        .light:nth-child(1) {
            animation-delay: 0s;
        }

        .light:nth-child(2) {
            animation-delay: 0.6s;
        }

        .light:nth-child(3) {
            animation-delay: 1.2s;
        }

        @keyframes webDroplet {
            0%, 100% {
                background: rgba(255, 255, 255, 0.3);
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
                transform: scale(1);
            }
            50% {
                background: rgba(102, 126, 234, 0.9);
                box-shadow: 0 0 15px rgba(102, 126, 234, 0.9);
                transform: scale(1.2);
            }
        }

        .racing-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin: 0 auto 2rem;
            max-width: 600px;
        }

        .divider-line {
            flex: 1;
            height: 3px;
            background: linear-gradient(90deg,
                transparent 0%,
                rgba(102, 126, 234, 0.6) 50%,
                transparent 100%
            );
            position: relative;
        }

        .divider-line::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                white 5px,
                white 10px,
                transparent 10px,
                transparent 20px
            );
            transform: translateY(-50%);
        }

        .race-finish {
            font-size: 2rem;
            filter: drop-shadow(0 0 15px rgba(102, 126, 234, 0.8));
            animation: webGlow 2s ease-in-out infinite;
        }

        @keyframes webGlow {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 15px rgba(102, 126, 234, 0.8));
            }
            50% {
                transform: scale(1.1);
                filter: drop-shadow(0 0 25px rgba(102, 126, 234, 1));
            }
        }

        footer p {
            color: rgba(255, 255, 255, 0.8);
            margin: 0.5rem 0;
            position: relative;
            z-index: 1;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        footer a:hover {
            color: #f093fb;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .side-info-cards {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .project-hero {
                height: 400px;
                min-height: 400px;
            }

            .hero-content h1 {
                font-size: 2rem;
            }

            .hero-content .subtitle {
                font-size: 1.1rem;
            }

            .content-section {
                padding: 2rem 1.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .image-gallery {
                grid-template-columns: 1fr;
            }

            .gallery-item,
            .gallery-item.featured {
                height: 350px;
                grid-column: span 1;
            }

            .model-controls {
                flex-wrap: wrap;
                padding: 0.8rem 1rem;
                gap: 0.5rem;
            }

            .model-control-btn {
                padding: 0.5rem 1rem;
                font-size: 0.75rem;
            }

            .racing-track-nav {
                grid-template-columns: 1fr;
                gap: 1.5rem;
                padding: 1.5rem 0;
            }

            .track-line {
                display: none;
            }

            .track-checkpoint {
                padding: 1.2rem 1.5rem;
                gap: 1rem;
                justify-content: center;
            }

            .checkpoint-left,
            .checkpoint-right {
                justify-content: center;
            }

            .checkpoint-content {
                text-align: center !important;
            }

            .checkpoint-flag {
                font-size: 2rem;
            }

            .speed-arrow {
                font-size: 2rem;
            }

            .checkpoint-title {
                font-size: 1rem;
            }

            .checkpoint-label {
                font-size: 0.7rem;
            }

            .pit-stop {
                order: -1;
                padding: 1.2rem 2rem;
            }

            .pit-stop-icon {
                font-size: 1.5rem;
            }

            .pit-stop-text {
                font-size: 0.95rem;
            }

            .racing-divider {
                gap: 1rem;
            }

            .race-finish {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar">
            <div class="progress-spider">üï∑Ô∏è</div>
        </div>
    </div>

    <!-- Galaxy Background -->
    <div class="animated-bg"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div onclick="window.scrollTo({top: 0, behavior: 'smooth'})" style="cursor: pointer;">
                <img src="Images/favicon.ico" alt="Yiqing Zhi Logo" class="nav-logo">
            </div>
            <a href="Home_Darker.html#projects" class="back-btn">
                <span>‚Üê Back to Portfolio</span>
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="project-hero">
        <div class="carousel-corner corner-tl"></div>
        <div class="carousel-corner corner-tr"></div>
        <div class="carousel-corner corner-bl"></div>
        <div class="carousel-corner corner-br"></div>
        
        <!-- Left Side Info Cards -->
        <div class="side-info-cards left">
            <div class="info-card" style="animation-delay: 0.2s;">
                <div class="info-icon">ü§ñ</div>
                <div class="info-text">
                    <h4>Robot Type</h4>
                    <p>Quadruped Spider</p>
                </div>
            </div>
            <div class="info-card" style="animation-delay: 0.4s;">
                <div class="info-icon">ü¶ø</div>
                <div class="info-text">
                    <h4>Degrees of Freedom</h4>
                    <p>12 DOF Total</p>
                </div>
            </div>
            <div class="info-card" style="animation-delay: 0.6s;">
                <div class="info-icon">
                    <img src="Images/CAD_icon.png" alt="CAD" style="width: 2.5rem; height: 2.5rem;">
                </div>
                <div class="info-text">
                    <h4>Design Tool</h4>
                    <p>SolidWorks</p>
                </div>
            </div>
        </div>
        
        <!-- Right Side Info Cards -->
        <div class="side-info-cards right">
            <div class="info-card" style="animation-delay: 0.3s;">
                <div class="info-icon">‚öôÔ∏è</div>
                <div class="info-text">
                    <h4>Actuation</h4>
                    <p>Servo Motors</p>
                </div>
            </div>
            <div class="info-card" style="animation-delay: 0.5s;">
                <div class="info-icon">üéÆ</div>
                <div class="info-text">
                    <h4>Control</h4>
                    <p>Inverse Kinematics</p>
                </div>
            </div>
            <div class="info-card" style="animation-delay: 0.7s;">
                <div class="info-icon">üìê</div>
                <div class="info-text">
                    <h4>Documentation</h4>
                    <p>Technical Drawings</p>
                </div>
            </div>
        </div>
        
        <!-- 3D Canvas Container -->
        <div id="hero-3d-canvas"></div>
        
        <!-- Loading Indicator -->
        <div class="model-loading" id="modelLoading">
            <div style="font-size: 2rem; margin-bottom: 1rem;">‚è≥</div>
            <div>Loading 3D Spider Robot...</div>
        </div>
        
        <!-- 3D Model Controls -->
        <div class="model-controls">
            <button class="model-control-btn" onclick="reset3DView()">üîÑ Reset</button>
            <button class="model-control-btn" onclick="toggle3DRotate()" id="rotateBtn">üîÅ Rotate</button>
            <button class="model-control-btn" onclick="toggle3DWireframe()" id="wireframeBtn">üìê Wire</button>
            <button class="model-control-btn" onclick="change3DColor()">üé® Color</button>
        </div>
    </section>

    <!-- Content -->
    <div class="container">
        
        <!-- Project Overview -->
        <div class="content-section">
            <h2 class="section-title">
                <span>üéØ</span>
                Project Overview
            </h2>
            <div class="section-content">
                <p>The Four-Foot Spider Robot project focused on creating a detailed 3D model of a quadruped robot inspired by biomimetic design principles. I focused on developing the robot‚Äôs mechanical structure, designing each component in CAD, and producing the physical model using 3D printing.</p>
                
                <p>At its core, this robot is built around a sophisticated 12 degree-of-freedom (DOF) system, with each of the four legs featuring three independently controlled servo motors. This configuration enables complex gaits including walking, turning, and adaptive terrain navigation. The mechanical design draws inspiration from arachnid biomechanics, optimizing for stability, weight distribution, and power efficiency.</p>
                
                <p>Beyond basic locomotion, the spider robot incorporates computer vision capabilities through an integrated camera system, allowing it to detect and track colored objects in real-time. The vision system communicates with the motion control layer to enable autonomous behaviors such as object following, obstacle avoidance, and path planning.</p>
            </div>
        </div>

                <!-- Project Gallery -->
        <div class="content-section">
            <h2 class="section-title">
                <span>üì∏</span>
                Project Gallery
            </h2>
            <div class="section-content">
                <p>Explore the complete development journey of the Four Foot Spider Robot, from initial CAD design through fabrication to testing and validation.</p>
                
                <h3>ü§ñ Robot Design & Assembly</h3>
                <p>Interactive 3D gallery showcasing the mechanical design, fabrication, and assembly process.</p>
            </div>
            
            <!-- 3D Rotating Carousel -->
            <div class="carousel-container" id="robotCarousel">
                <div class="carousel-track">
                    <!-- Slide 1: Complete Assembly -->
                    <div class="carousel-slide" data-index="0">
                        <span class="carousel-badge">üèÜ Complete Assembly</span>
                        <img src="Images/Overall3.png" alt="Spider Robot Complete Assembly">
                        <div class="carousel-caption">
                            <h4>Complete Spider Robot - Top View</h4>
                            <p class="short-desc">Fully assembled quadruped with 12 DOF leg system.</p>
                            <p class="long-desc">Fully assembled quadruped robot featuring 12 DOF leg system with four 3-joint legs arranged in a symmetrical configuration. The central body houses the microcontroller, power distribution, and control electronics. Each leg consists of coxa, femur, and tibia segments for complex articulated movement patterns including walking, turning, and terrain adaptation.</p>
                            <div class="caption-expand-btn" onclick="toggleCaption(event)">üìñ Read More</div>
                        </div>
                    </div>

                    <!-- Slide 2: Robot Body -->
                    <div class="carousel-slide" data-index="1">
                        <span class="carousel-badge">üîß Chassis Design</span>
                        <img src="Images/Robot_Body.png" alt="Robot Body CAD">
                        <div class="carousel-caption">
                            <h4>Central Body & Chassis Structure</h4>
                            <p class="short-desc">Central chassis with optimized mounting geometry.</p>
                            <p class="long-desc">Central chassis platform designed in SolidWorks showing mounting points for leg assemblies, electronics enclosure, and power system. Features optimized weight distribution and structural rigidity for stable locomotion. Includes integrated cable routing channels and mounting bosses for servo motors with proper load distribution.</p>
                            <div class="caption-expand-btn" onclick="toggleCaption(event)">üìñ Read More</div>
                        </div>
                    </div>

                    <!-- Slide 3: Leg Assembly -->
                    <div class="carousel-slide" data-index="2">
                        <span class="carousel-badge">ü¶ø Leg Mechanism</span>
                        <img src="Images/Robot_Leg.png" alt="Robot Leg Detail">
                        <div class="carousel-caption">
                            <h4>3-DOF Leg Assembly - Detailed View</h4>
                            <p class="short-desc">Three-joint leg with servo actuation system.</p>
                            <p class="long-desc">Single leg assembly showing the three-joint configuration with servo motor placement. The coxa joint provides hip rotation for lateral movement, femur joint controls forward/backward leg swing, and tibia joint enables precise foot positioning for ground contact. Custom brackets ensure proper torque transmission and minimize backlash.</p>
                            <div class="caption-expand-btn" onclick="toggleCaption(event)">üìñ Read More</div>
                        </div>
                    </div>

                    <!-- Slide 4: Engineering Drawing -->
                    <div class="carousel-slide" data-index="3">
                        <span class="carousel-badge">üìê Technical Drawing</span>
                        <img src="Images/Overall3.png" alt="Engineering Drawings" style="filter: brightness(1.2) contrast(1.1);">
                        <div class="carousel-caption">
                            <h4>Engineering Drawings - Body Component</h4>
                            <p class="short-desc">Detailed technical drawings with full dimensions.</p>
                            <p class="long-desc">Detailed technical drawing with full dimensions and tolerances for the robot body component. Includes multiple views, cross-sections, and manufacturing specifications for precision fabrication. Features GD&T callouts, material specifications, and assembly notes. <a href="Images/Part1.pdf" target="_blank" style="color: #667eea; text-decoration: underline;">View Full PDF</a></p>
                            <div class="caption-expand-btn" onclick="toggleCaption(event)">üìñ Read More</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Carousel Controls -->
            <div class="carousel-controls">
                <button class="carousel-btn" onclick="prevSlide('robotCarousel')">‚ùÆ</button>
                <div class="carousel-dots" id="robotDots"></div>
                <button class="carousel-btn" onclick="nextSlide('robotCarousel')">‚ùØ</button>
            </div>

        <!-- Technical Architecture -->
        <div class="content-section">
            <h2 class="section-title">
                <span>‚öôÔ∏è</span>
                Technical Architecture
            </h2>
            <div class="section-content">
                <h3>ü¶ø Mechanical Design</h3>
                <p>The spider robot's mechanical structure is optimized for both stability and agility. Each leg consists of three segments connected by servo-actuated joints, providing coxa (hip), femur (thigh), and tibia (shin) articulation. This configuration closely mimics biological arthropod locomotion while maintaining manufacturability and serviceability.</p>
                
                <ul>
                    <li><strong>Frame Construction:</strong> Lightweight yet rigid chassis made from laser-cut acrylic and 3D-printed components, minimizing weight while ensuring structural integrity</li>
                    <li><strong>Joint Design:</strong> Custom servo brackets with optimized geometry for maximum range of motion and load distribution</li>
                    <li><strong>Weight Distribution:</strong> Strategic component placement to maintain center of gravity over the support polygon during all gait phases</li>
                    <li><strong>Modular Leg Assembly:</strong> Standardized leg design allows for easy replacement and testing of different configurations</li>
                </ul>

                <h3>üíª Control System</h3>
                <p>The robot's brain consists of a microcontroller-based embedded system running custom firmware that orchestrates all motion and sensory processing. The control architecture is hierarchical, separating high-level planning from low-level actuation.</p>
                
                <ul>
                    <li><strong>Microcontroller Platform:</strong> Arduino-based control system with sufficient I/O and processing power for real-time servo control</li>
                    <li><strong>Inverse Kinematics Solver:</strong> Mathematical model translating desired foot positions into individual joint angles using geometric transformation matrices</li>
                    <li><strong>Gait Generator:</strong> State machine implementation coordinating leg phases for stable walking patterns (tripod gait, wave gait)</li>
                    <li><strong>Servo Control Loop:</strong> PWM signal generation with position feedback for precise actuation</li>
                    <li><strong>Communication Protocol:</strong> Serial interface for debugging and parameter tuning during development</li>
                </ul>

                <h3>üëÅÔ∏è Computer Vision System</h3>
                <p>The vision subsystem enables the robot to perceive and react to its environment. Using a camera module and image processing algorithms, the robot can identify objects of interest and adjust its behavior accordingly.</p>
                
                <ul>
                    <li><strong>Camera Integration:</strong> Small form-factor camera module providing real-time image capture</li>
                    <li><strong>Color Detection Algorithm:</strong> HSV color space filtering for robust object identification under varying lighting</li>
                    <li><strong>Object Tracking:</strong> Centroid calculation and motion prediction for smooth following behavior</li>
                    <li><strong>Vision-Motion Integration:</strong> Closed-loop control system using visual feedback to guide locomotion</li>
                </ul>

                <h3>üîã Power Management</h3>
                <p>Efficient power distribution is critical for mobile robotics. The spider robot incorporates a multi-rail power system to supply different voltages to various subsystems.</p>
                
                <ul>
                    <li><strong>Battery System:</strong> Rechargeable LiPo battery pack providing sufficient capacity for extended operation</li>
                    <li><strong>Voltage Regulation:</strong> Buck converters supplying stable power to servos and microcontroller</li>
                    <li><strong>Power Monitoring:</strong> Battery voltage sensing with low-battery protection to prevent damage</li>
                </ul>
            </div>
        </div>

        <!-- My Contributions -->
        <div class="content-section">
            <h2 class="section-title">
                <span>‚ö°</span>
                My Contributions
            </h2>
            <div class="section-content">
                <h3>üîß Mechanical Design & Fabrication</h3>
                <ul>
                    <li><strong>CAD Modeling:</strong> Complete 3D model development in SolidWorks, including assembly design, interference checking, and bill of materials generation</li>
                    <li><strong>Structural Analysis:</strong> FEA simulation to validate load-bearing capacity of critical components under dynamic walking conditions</li>
                    <li><strong>Manufacturing:</strong> Executed all fabrication steps including 3D printing of custom parts, laser cutting of chassis plates, and assembly of mechanical systems</li>
                    <li><strong>Iterative Refinement:</strong> Multiple design iterations based on physical testing feedback, optimizing for weight reduction and improved kinematics</li>
                </ul>

                <h3>üíª Software Development & Control</h3>
                <ul>
                    <li><strong>Firmware Architecture:</strong> Designed and implemented complete embedded control software in C/C++, featuring modular structure for maintainability</li>
                    <li><strong>Kinematics Implementation:</strong> Developed inverse kinematics solver from first principles, deriving transformation matrices and implementing numerical solutions</li>
                    <li><strong>Gait Pattern Programming:</strong> Created coordinated multi-leg walking algorithms with smooth transitions between movement states</li>
                    <li><strong>Vision Processing:</strong> Implemented color detection and object tracking algorithms using OpenCV, optimized for real-time performance on embedded hardware</li>
                    <li><strong>Control Loop Tuning:</strong> Calibrated PID parameters and timing sequences through systematic testing for responsive, stable operation</li>
                </ul>

                <h3>üß™ Testing & Validation</h3>
                <ul>
                    <li><strong>Unit Testing:</strong> Validated individual subsystems (servo control, kinematics solver, vision pipeline) independently before integration</li>
                    <li><strong>Integration Testing:</strong> Systematic testing of combined systems, debugging communication protocols and timing issues</li>
                    <li><strong>Performance Metrics:</strong> Measured walking speed, stability margins, battery life, and vision tracking accuracy</li>
                    <li><strong>Behavioral Testing:</strong> Evaluated autonomous behaviors including obstacle avoidance and object following in various environments</li>
                    <li><strong>Documentation:</strong> Comprehensive documentation of design decisions, code structure, and testing procedures for future development</li>
                </ul>

                <h3>üéØ Project Management</h3>
                <ul>
                    <li><strong>Timeline Planning:</strong> Developed project schedule with milestones for mechanical design, software development, and testing phases</li>
                    <li><strong>Resource Management:</strong> Sourced components, managed budget, and coordinated access to fabrication equipment</li>
                    <li><strong>Risk Mitigation:</strong> Identified potential failure modes and developed contingency plans for critical systems</li>
                    <li><strong>Technical Communication:</strong> Created detailed technical documentation and demonstration materials</li>
                </ul>
            </div>
        </div>

        <!-- Challenges & Solutions -->
        <div class="content-section">
            <h2 class="section-title">
                <span>üéì</span>
                Challenges & Solutions
            </h2>
            <div class="section-content">
                <h3>‚öñÔ∏è Challenge: Dynamic Stability</h3>
                <p><strong>Problem:</strong> Initial walking tests revealed stability issues, with the robot tipping during certain gait phases, particularly when transitioning between leg support configurations.</p>
                <p><strong>Solution:</strong> Implemented a dynamic center of gravity calculation that adjusts body height and posture based on current leg positions. Added stability margin checking to the gait generator, ensuring the projected center of mass always remains within the support polygon. This required modifying the inverse kinematics solver to accept body pose adjustments.</p>

                <h3>‚ö° Challenge: Servo Response Timing</h3>
                <p><strong>Problem:</strong> Synchronization issues between servo motors caused jerky, uncoordinated movement. Different servos had varying response times, leading to phase misalignment in gait patterns.</p>
                <p><strong>Solution:</strong> Developed a calibration routine to measure individual servo response characteristics. Implemented a predictive control algorithm that accounts for each servo's latency, issuing commands with calculated time offsets. This resulted in smooth, coordinated leg motion even with hardware variations.</p>

                <h3>üëÅÔ∏è Challenge: Vision System Performance</h3>
                <p><strong>Problem:</strong> Initial computer vision implementation suffered from poor performance in varying lighting conditions and struggled with real-time processing constraints on the embedded hardware.</p>
                <p><strong>Solution:</strong> Optimized the image processing pipeline by reducing frame resolution for tracking (while maintaining higher resolution for detection), implementing adaptive thresholding for lighting compensation, and using a Kalman filter for smooth tracking even during momentary detection failures. Offloaded heavy processing to a companion computer while keeping critical control on the microcontroller.</p>

                <h3>üîå Challenge: Power Distribution</h3>
                <p><strong>Problem:</strong> Simultaneous servo movement caused significant current spikes, leading to voltage drops that reset the microcontroller and corrupted sensor readings.</p>
                <p><strong>Solution:</strong> Redesigned the power system with separate power rails for servos and electronics, adding bulk capacitors near high-current consumers to handle transient loads. Implemented current-limiting in the motion planner to stage servo movements and avoid peak current overlap. Added battery voltage monitoring with graceful degradation when power runs low.</p>

                <h3>üßÆ Challenge: Inverse Kinematics Complexity</h3>
                <p><strong>Problem:</strong> Deriving and implementing the inverse kinematics equations for a 3-DOF leg proved mathematically challenging, with multiple solutions for some positions and unreachable regions in the workspace.</p>
                <p><strong>Solution:</strong> Developed a geometric approach that simplifies the 3D problem into 2D projections, making the mathematics more tractable. Implemented solution selection logic to choose the most natural leg configuration. Added workspace boundary checking to prevent attempts to reach impossible positions, with graceful error handling.</p>

                <h3>üîß Challenge: Mechanical Wear</h3>
                <p><strong>Problem:</strong> Extended testing revealed wear on servo splines and mounting points, causing backlash and reduced precision over time.</p>
                <p><strong>Solution:</strong> Redesigned critical joints with reinforced mounting brackets and added thrust bearings to reduce axial loads on servos. Implemented a maintenance schedule with regular inspection points. For future iterations, planned migration to metal gears and more robust bearing solutions.</p>
            </div>
        </div>

        <!-- Results & Impact -->
        <div class="content-section">
            <h2 class="section-title">
                <span>üèÜ</span>
                Results & Impact
            </h2>
            <div class="section-content">
                <h3>üìä Performance Achievements</h3>
                <ul>
                    <li><strong>Locomotion Success:</strong> Successfully demonstrated stable walking at speeds up to 0.15 m/s across flat terrain with multiple gait patterns</li>
                    <li><strong>Autonomous Operation:</strong> Achieved reliable autonomous object following with < 5cm tracking error at distances of 0.5-2 meters</li>
                    <li><strong>System Reliability:</strong> Robot operated for 45+ continuous minutes per charge with consistent performance</li>
                    <li><strong>Kinematic Accuracy:</strong> Inverse kinematics solver converges to solutions within 2mm of target positions with sub-50ms computation time</li>
                    <li><strong>Vision Performance:</strong> Color detection maintains 90%+ accuracy across varying indoor lighting conditions with 15 FPS processing rate</li>
                </ul>

                <h3>üéØ Technical Learning Outcomes</h3>
                <ul>
                    <li><strong>Mechanical Design:</strong> Gained deep expertise in kinematics, structural analysis, and design for manufacturability in robotic systems</li>
                    <li><strong>Embedded Systems:</strong> Developed strong skills in real-time programming, hardware interfacing, and resource-constrained optimization</li>
                    <li><strong>Control Theory:</strong> Practical implementation of inverse kinematics, gait generation, and closed-loop feedback control</li>
                    <li><strong>Computer Vision:</strong> Hands-on experience with image processing algorithms, color space transformations, and object tracking</li>
                    <li><strong>Systems Integration:</strong> Learned to coordinate multiple subsystems (mechanical, electrical, software) into a cohesive functional robot</li>
                </ul>

                <h3>üí° Key Insights</h3>
                <p><strong>Interdisciplinary Thinking:</strong> This project reinforced the importance of considering mechanical, electrical, and software constraints simultaneously rather than in isolation. Design decisions in one domain significantly impact others.</p>
                
                <p><strong>Iterative Development:</strong> The most significant improvements came from rapid prototyping and testing cycles. Physical testing revealed issues that simulations missed, emphasizing the value of empirical validation.</p>
                
                <p><strong>Modularity Benefits:</strong> Designing with modularity in mind from the start paid dividends during debugging and improvement phases. Being able to isolate and test subsystems independently accelerated development significantly.</p>

                <h3>üöÄ Future Enhancement Opportunities</h3>
                <ul>
                    <li><strong>Advanced Sensing:</strong> Integration of IMU for orientation feedback and ultrasonic sensors for obstacle detection</li>
                    <li><strong>Machine Learning:</strong> Gait optimization through reinforcement learning to adapt to various terrains</li>
                    <li><strong>Improved Vision:</strong> Depth perception using stereo camera or structured light for 3D environment mapping</li>
                    <li><strong>Communication:</strong> Wireless control interface and telemetry for remote operation and monitoring</li>
                    <li><strong>Multi-Robot Coordination:</strong> Implementation of swarm behavior with multiple spider robots communicating and collaborating</li>
                </ul>
            </div>
        </div>

    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">√ó</span>
        <img src="" alt="Full size image" id="lightbox-img">
    </div>

    <!-- Footer -->
    <footer>
        <div class="racing-track-nav">
            <div class="track-line"></div>
            
            <a href="Project-uwfe-3D.html" class="track-checkpoint checkpoint-left">
                <div class="checkpoint-flag">üèéÔ∏è</div>
                <div class="checkpoint-content">
                    <span class="checkpoint-label">PREVIOUS PROJECT</span>
                    <span class="checkpoint-title">Waterloo Formula Electric</span>
                </div>
                <div class="speed-arrow">‚Üê</div>
            </a>
            
            <a href="Home_Darker.html#projects" class="pit-stop">
                <div class="pit-stop-icon">üï∏Ô∏è</div>
                <span class="pit-stop-text">ALL PROJECTS</span>
                <div class="pit-stop-lights">
                    <span class="light"></span>
                    <span class="light"></span>
                    <span class="light"></span>
                </div>
            </a>
            
            <a href="next-project.html" class="track-checkpoint checkpoint-right">
                <div class="speed-arrow">‚Üí</div>
                <div class="checkpoint-content">
                    <span class="checkpoint-label">NEXT PROJECT</span>
                    <span class="checkpoint-title">Next Project</span>
                </div>
                <div class="checkpoint-flag">üöÄ</div>
            </a>
        </div>

        <div class="racing-divider">
            <div class="divider-line"></div>
            <span class="race-finish">üï∏Ô∏è</span>
            <div class="divider-line"></div>
        </div>

        <p style="font-size: 0.95rem; letter-spacing: 1px;">Copyright ¬© 2025 Yiqing Zhi</p>
    </footer>

    <script>
        // Progress Bar Update on Scroll
        window.addEventListener('scroll', function() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Lightbox functionality
        const galleryItems = document.querySelectorAll('.gallery-item img');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        galleryItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.stopPropagation();
                lightbox.classList.add('active');
                lightboxImg.src = this.src;
            });
        });

        function closeLightbox() {
            lightbox.classList.remove('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });

        // ==========================================
        // 3D SPIDER ROBOT MODEL VIEWER
        // ==========================================
        let scene3D, camera3D, renderer3D, controls3D, spiderModel;
        let autoRotate3D = false, wireframeMode3D = false, colorIndex = 0;
        const modelColors = [0x808080, 0x2a2a2a]; 
        let rotationPhase = 'horizontal';
        let rotationProgress = 0;
        let initialRotation = { x: 0, y: 0, z: 0 };
        let initialPosition = { x: 0, y: 0, z: 0 };

        function init3DSpider() {
            const container = document.getElementById('hero-3d-canvas');
            if (!container) return;

            scene3D = new THREE.Scene();
            camera3D = new THREE.PerspectiveCamera(50, container.clientWidth / container.clientHeight, 0.1, 1000);
            
            // Position camera to view spider robot
            camera3D.position.set(40, 70, 45); 
            camera3D.lookAt(0, 0, 0);

            renderer3D = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer3D.setSize(container.clientWidth, container.clientHeight);
            renderer3D.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer3D.domElement);

            controls3D = new THREE.OrbitControls(camera3D, renderer3D.domElement);
            controls3D.enableDamping = true;
            controls3D.dampingFactor = 0.05;
            controls3D.minDistance = 20;
            controls3D.maxDistance = 200;
            controls3D.target.set(0, 0, 0);

            // Lighting
            scene3D.add(new THREE.AmbientLight(0xffffff, 0.6));
            const light1 = new THREE.DirectionalLight(0x667eea, 1.2);
            light1.position.set(50, 80, 40);
            scene3D.add(light1);
            const light2 = new THREE.DirectionalLight(0xf093fb, 0.9);
            light2.position.set(-50, 40, -40);
            scene3D.add(light2);

            load3DModel();
            
            window.addEventListener('resize', () => {
                camera3D.aspect = container.clientWidth / container.clientHeight;
                camera3D.updateProjectionMatrix();
                renderer3D.setSize(container.clientWidth, container.clientHeight);
            });

            animate3D();
        }

        function load3DModel() {
            const loader = new THREE.GLTFLoader();
            loader.load(
                'Images/Robot_Overall_Assembly.glb',  
                (gltf) => {
                    spiderModel = gltf.scene;
                    const box = new THREE.Box3().setFromObject(spiderModel);
                    const center = box.getCenter(new THREE.Vector3());
                    const size = box.getSize(new THREE.Vector3());
                    const scale = 60 / Math.max(size.x, size.y, size.z);

                    spiderModel.scale.multiplyScalar(scale);

                    // Create a wrapper group for proper rotation pivot
                    const modelGroup = new THREE.Group();
                    spiderModel.position.set(-center.x * scale, -center.y * scale, -center.z * scale);
                    modelGroup.add(spiderModel);

                    // Update the reference to use the group instead
                    spiderModel = modelGroup;
                    
                    spiderModel.rotation.x = Math.PI;
                    spiderModel.rotation.y = 0;
                    spiderModel.rotation.z = 0;

                    initialRotation = {
                        x: spiderModel.rotation.x,
                        y: spiderModel.rotation.y,
                        z: spiderModel.rotation.z
                    };
                    initialPosition = {
                        x: spiderModel.position.x,
                        y: spiderModel.position.y,
                        z: spiderModel.position.z
                    };
                    
                    spiderModel.traverse((child) => {
                        if (child.isMesh) {
                            child.castShadow = true;
                            child.receiveShadow = true;
                            if (child.material && child.material.color) {
                                child.userData.originalColor = child.material.color.clone();
                            }
                        }
                    });
                    
                    scene3D.add(spiderModel);
                    hideModelLoading();
                    gsap.from(spiderModel.scale, { x: 0, y: 0, z: 0, duration: 1.5, ease: "back.out(1.7)" });
                },
                (xhr) => updateLoadingText(`Loading... ${Math.round((xhr.loaded / xhr.total) * 100)}%`),
                (error) => { console.error('Error:', error); updateLoadingText('‚ùå Model load failed'); }
            );
        }

        function animate3D() {
            requestAnimationFrame(animate3D);
            if (controls3D) controls3D.update();
            
            if (spiderModel && autoRotate3D) {
                const rotationSpeed = 0.005;
                
                if (rotationPhase === 'horizontal') {
                    spiderModel.rotation.y += rotationSpeed;
                    rotationProgress += rotationSpeed;
                    
                    if (rotationProgress >= Math.PI * 2) {
                        rotationPhase = 'vertical';
                        rotationProgress = 0;
                    }
                } else if (rotationPhase === 'vertical') {
                    spiderModel.rotation.x += rotationSpeed;
                    rotationProgress += rotationSpeed;
                    
                    if (rotationProgress >= Math.PI * 2) {
                        rotationPhase = 'horizontal';
                        rotationProgress = 0;
                    }
                }
            }
            
            renderer3D.render(scene3D, camera3D);
        }

        function hideModelLoading() {
            const loading = document.getElementById('modelLoading');
            if (loading) setTimeout(() => loading.classList.add('hidden'), 300);
        }

        function updateLoadingText(text) {
            const loading = document.getElementById('modelLoading');
            if (loading) {
                const textDiv = loading.querySelector('div:last-child');
                if (textDiv) textDiv.textContent = text;
            }
        }

        function reset3DView() {
            if (!camera3D || !controls3D || !spiderModel) return;
            
            if (autoRotate3D) {
                autoRotate3D = false;
                const btn = document.getElementById('rotateBtn');
                if (btn) btn.textContent = 'üîÅ Rotate';
            }
            
            rotationPhase = 'horizontal';
            rotationProgress = 0;
            controls3D.enabled = false;
            
            gsap.to(spiderModel.rotation, {
                x: initialRotation.x,
                y: initialRotation.y,
                z: initialRotation.z,
                duration: 1.5,
                ease: "power2.inOut"
            });
            
            gsap.to(spiderModel.position, {
                x: initialPosition.x,
                y: initialPosition.y,
                z: initialPosition.z,
                duration: 1.5,
                ease: "power2.inOut"
            });
            
            gsap.to(camera3D.position, { 
                x: 40, 
                y: 70, 
                z: 45, 
                duration: 1.5, 
                ease: "power2.inOut",
                onUpdate: () => {
                    camera3D.lookAt(0, 0, 0);
                    controls3D.update();
                }
            });
            
            gsap.to(controls3D.target, { 
                x: 0, 
                y: 0, 
                z: 0, 
                duration: 1.5, 
                ease: "power2.inOut",
                onComplete: () => {
                    controls3D.enabled = true;
                }
            });
        }

        function toggle3DRotate() {
            autoRotate3D = !autoRotate3D;
            
            if (autoRotate3D) {
                rotationPhase = 'horizontal';
                rotationProgress = 0;
            }
            
            const btn = document.getElementById('rotateBtn');
            if (btn) btn.textContent = autoRotate3D ? '‚è∏Ô∏è Stop' : 'üîÅ Rotate';
        }

        function toggle3DWireframe() {
            if (!spiderModel) return;
            wireframeMode3D = !wireframeMode3D;
            
            spiderModel.traverse((child) => {
                if (child.isMesh && child.material) {
                    if (wireframeMode3D) {
                        child.material.wireframe = true;
                        child.material.color.setHex(0x667eea); 
                        child.material.opacity = 0.8;
                        child.material.transparent = true;
                    } else {
                        child.material.wireframe = false;
                        if (child.userData.originalColor) {
                            child.material.color.copy(child.userData.originalColor);
                        }
                        child.material.opacity = 1.0;
                        child.material.transparent = false;
                    }
                }
            });
            
            const btn = document.getElementById('wireframeBtn');
            if (btn) btn.textContent = wireframeMode3D ? 'üé® Solid' : 'üìê Wire';
        }

        function change3DColor() {
            if (!spiderModel) return;
            colorIndex = (colorIndex + 1) % modelColors.length;
            const newColor = modelColors[colorIndex];
            
            spiderModel.traverse((child) => {
                if (child.isMesh && child.material) {
                    const currentColor = child.material.color;
                    const brightness = (currentColor.r + currentColor.g + currentColor.b) / 3;
                    
                    if (brightness < 0.8) {
                        gsap.to(child.material.color, {
                            r: ((newColor >> 16) & 255) / 255,
                            g: ((newColor >> 8) & 255) / 255,
                            b: (newColor & 255) / 255,
                            duration: 0.5
                        });
                    }
                }
            });
        }

        // Initialize 3D viewer when page loads
        window.addEventListener('load', () => setTimeout(init3DSpider, 500));

        const carousels = {
            robotCarousel: { currentIndex: 0, totalSlides: 4 },
        };

        let autoRotateInterval = null;
        const AUTO_ROTATE_DELAY = 5000; // 5 seconds between slides
        let isUserInteracting = false;
        let isMouseOverCarousel = false; // NEW: Track mouse hover state

        function initCarousels() {
            Object.keys(carousels).forEach(carouselId => {
                updateCarousel(carouselId);
                createDots(carouselId);
            });
        }

        function updateCarousel(carouselId) {
            const carousel = document.getElementById(carouselId);
            if (!carousel) return;
            
            const slides = carousel.querySelectorAll('.carousel-slide');
            const currentIndex = carousels[carouselId].currentIndex;
            const total = slides.length;
            
            slides.forEach((slide, index) => {
                slide.classList.remove('active', 'left', 'right', 'hidden');
                
                if (index === currentIndex) {
                    slide.classList.add('active');
                } else if (index === (currentIndex - 1 + total) % total) {
                    slide.classList.add('left');
                } else if (index === (currentIndex + 1) % total) {
                    slide.classList.add('right');
                } else {
                    slide.classList.add('hidden');
                }
            });
            
            updateDots(carouselId);
        }

        function createDots(carouselId) {
            const dotsContainer = document.getElementById(carouselId.replace('Carousel', 'Dots'));
            if (!dotsContainer) return;
            
            dotsContainer.innerHTML = '';
            const total = carousels[carouselId].totalSlides;
            
            for (let i = 0; i < total; i++) {
                const dot = document.createElement('div');
                dot.classList.add('carousel-dot');
                if (i === 0) dot.classList.add('active');
                dot.onclick = () => goToSlide(carouselId, i);
                dotsContainer.appendChild(dot);
            }
        }

        function updateDots(carouselId) {
            const dotsContainer = document.getElementById(carouselId.replace('Carousel', 'Dots'));
            if (!dotsContainer) return;
            
            const dots = dotsContainer.querySelectorAll('.carousel-dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === carousels[carouselId].currentIndex);
            });
        }

        function nextSlide(carouselId) {
            pauseAutoRotate();
            const total = carousels[carouselId].totalSlides;
            carousels[carouselId].currentIndex = (carousels[carouselId].currentIndex + 1) % total;
            updateCarousel(carouselId);
        }

        function prevSlide(carouselId) {
            pauseAutoRotate();
            const total = carousels[carouselId].totalSlides;
            carousels[carouselId].currentIndex = (carousels[carouselId].currentIndex - 1 + total) % total;
            updateCarousel(carouselId);
        }

        function goToSlide(carouselId, index) {
            pauseAutoRotate();
            carousels[carouselId].currentIndex = index;
            updateCarousel(carouselId);
        }

        // Initialize carousel on page load
        document.addEventListener('DOMContentLoaded', () => {
            initCarousels();
            
            // Start auto-rotation
            startAutoRotate('robotCarousel');
            
            // Click on side images to navigate
            document.querySelectorAll('.carousel-slide').forEach(slide => {
                slide.addEventListener('click', function() {
                    if (this.classList.contains('left')) {
                        const carouselId = this.closest('.carousel-container').id;
                        prevSlide(carouselId);
                    } else if (this.classList.contains('right')) {
                        const carouselId = this.closest('.carousel-container').id;
                        nextSlide(carouselId);
                    }
                });
            });
            
            // FIXED: Pause auto-rotation when user hovers over carousel
            document.querySelectorAll('.carousel-container').forEach(carousel => {
                carousel.addEventListener('mouseenter', () => {
                    isMouseOverCarousel = true;
                    console.log('Mouse entered carousel - auto-rotation paused');
                });
                
                carousel.addEventListener('mouseleave', () => {
                    isMouseOverCarousel = false;
                    console.log('Mouse left carousel - auto-rotation resumed');
                });
            });
            
            // BONUS: Also pause when hovering over carousel controls
            document.querySelectorAll('.carousel-controls').forEach(controls => {
                controls.addEventListener('mouseenter', () => {
                    isMouseOverCarousel = true;
                });
                
                controls.addEventListener('mouseleave', () => {
                    isMouseOverCarousel = false;
                });
            });
        });

        // Toggle caption expansion
        function toggleCaption(event) {
            event.stopPropagation();
            const caption = event.target.closest('.carousel-caption');
            caption.classList.toggle('expanded');
            
            const btn = event.target;
            if (caption.classList.contains('expanded')) {
                btn.textContent = 'üìï Show Less';
            } else {
                btn.textContent = 'üìñ Read More';
            }
        }

        // Start auto-rotation
        function startAutoRotate(carouselId) {
            stopAutoRotate();
            
            autoRotateInterval = setInterval(() => {
                // ‚úÖ Only auto-rotate if user is NOT hovering over carousel
                if (!isUserInteracting && !isMouseOverCarousel) {
                    nextSlide(carouselId);
                }
            }, AUTO_ROTATE_DELAY);
        }

        // Stop auto-rotation
        function stopAutoRotate() {
            if (autoRotateInterval) {
                clearInterval(autoRotateInterval);
                autoRotateInterval = null;
            }
        }

        // Pause auto-rotation temporarily when user manually clicks
        function pauseAutoRotate() {
            isUserInteracting = true;
            setTimeout(() => {
                isUserInteracting = false;
            }, 5000);
        }

    </script>

</body>
</html>